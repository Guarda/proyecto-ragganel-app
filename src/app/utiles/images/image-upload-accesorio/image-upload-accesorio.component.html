<div class="main-container">
  <div class="upload-section">
    <h4>Subir Nueva Imagen</h4>
    <div class="upload-container">
      <div class="drop-zone" 
           (dragover)="onDragOver($event)" 
           (dragleave)="onDragLeave($event)" 
           (drop)="onDrop($event)"
           [class.drag-over]="isDragOver" 
           (click)="fileInput.click()">
        <p>Arrastra una imagen aquí o haz clic para seleccionar</p>
        <input #fileInput type="file" (change)="onFileSelected($event)" accept="image/*" style="display: none;">
      </div>

      <div *ngIf="previewUrl" class="preview-container">
        <img [src]="previewUrl" alt="Image Preview" class="image-preview">
        <div class="actions">
          <button *ngIf="selectedFile" (click)="onUpload($event)" class="upload-btn">Subir Imagen</button>
          <span *ngIf="uploadSuccess" class="success-message">
            ¡Imagen seleccionada!
          </span>
        </div>
      </div>
    </div>
  </div>

  <div class="separator">
    <span>O</span>
  </div>

  <div class="gallery-section">
    <h4>Seleccionar Imagen Existente</h4>

    <div *ngIf="isLoadingImages" class="loading-gallery">
      <p>Cargando imágenes...</p>
    </div>

    <div *ngIf="!isLoadingImages && existingImages.length > 0" class="image-gallery">
      <div *ngFor="let imageName of existingImages" class="gallery-item" (click)="selectExistingImage(imageName)">
        <img [src]="imagePath + imageName" [alt]="imageName" loading="lazy">
        <div class="image-name">{{ imageName }}</div>
      </div>
    </div>

    <div *ngIf="!isLoadingImages && existingImages.length === 0" class="no-images">
      <p>No hay imágenes existentes en el servidor.</p>
    </div>
  </div>
</div>