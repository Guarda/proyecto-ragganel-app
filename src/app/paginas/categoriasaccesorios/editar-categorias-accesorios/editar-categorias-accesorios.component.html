
<h3 mat-dialog-title>
  <span>Editar Categoría de Accesorio</span>
</h3>
<form [formGroup]="categoriaForm" (ngSubmit)="onSubmit()">
<div class="contenedor-principal">
  <div class="contenedor-secundario">
    
    <div class="contenedor-img-consola">
      <app-image-upload-accesorio [initialImageName]="LinkImagen"></app-image-upload-accesorio>
    </div>
    <div class="contendor-form">
      <mat-dialog-content class="mat-typography">
        <h3>Edita los detalles de la categoría {{IdModeloAccesorioPK}}</h3>
        <mat-form-field class="input-form-prod">
          <mat-label>Fabricante</mat-label>
          <mat-select formControlName ="FabricanteAccesorio" name="FabricanteAccesorio">             
              <mat-option *ngFor="let est of selectedFabricante" [value]="est.IdFabricanteAccesorioPK">{{est.NombreFabricanteAccesorio}}</mat-option>            
          </mat-select> 
        </mat-form-field>
        <mat-form-field class="input-form-prod">
          <mat-label>Categoría</mat-label>
          <mat-select formControlName ="CateAccesorio" name="CateAccesorio">             
              <mat-option *ngFor="let est of selectedCategoriaAccesorio" [value]="est.IdCategoriaAccesorioPK">{{est.NombreCategoriaAccesorio}}</mat-option>            
          </mat-select> 
        </mat-form-field> 
        <mat-form-field class="input-form-prod">
          <mat-label>Modelo</mat-label>
          <mat-select formControlName ="SubCategoriaAccesorio" name="SubCategoriaAccesorio">             
              <mat-option *ngFor="let est of selectedSubCategoriaAccesorio" [value]="est.IdSubcategoriaAccesorio">{{est.NombreSubcategoriaAccesorio}}</mat-option>            
          </mat-select> 
        </mat-form-field>    
        <mat-form-field class="input-form-prod">
          <mat-label>Prefijo del accesorio</mat-label>
          <input formControlName="CodigoModeloAccesorio" matInput cdkFocusInitial>
          <mat-error *ngIf="categoriaForm.get('CodigoModeloAccesorio')?.hasError('required')">
            El código es requerido.
          </mat-error>
          <mat-error *ngIf="categoriaForm.get('CodigoModeloAccesorio')?.hasError('codeExists')">
            Este código ya está en uso. Por favor, elige otro.
          </mat-error>
          <!-- Indicador de carga mientras se valida -->
          <mat-icon matSuffix *ngIf="categoriaForm.get('CodigoModeloAccesorio')?.pending">
            <mat-spinner diameter="20"></mat-spinner>
          </mat-icon>
        </mat-form-field>         
          
        </mat-dialog-content>
    </div>  
  </div>
</div>
<mat-dialog-actions align="end">
  <button mat-button mat-dialog-close type="button">Cancelar</button>
  <button mat-raised-button color="primary" type="submit" [disabled]="!categoriaForm.valid">Guardar Cambios</button>
</mat-dialog-actions>
</form>