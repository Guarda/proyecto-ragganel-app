<h2 mat-dialog-title>Historial del Pedido: {{ OrderId }}</h2>

<mat-dialog-content>
  <div class="timeline-container">
    <!-- Se itera sobre cada evento en el historial -->
    <div *ngFor="let item of historialPedidos; let i = index" class="timeline-item">
      <!-- El cÃ­rculo que marca el evento -->
      <div class="timeline-icon"></div>
      
      <!-- El contenido del evento -->
      <div class="timeline-content">
        <p class="state-change">
          <!-- Si hay un estado anterior, lo muestra. Si no, muestra "Creado" -->
          <span *ngIf="item.EstadoAnteriorDescripcion">
            De: <strong>{{ item.EstadoAnteriorDescripcion }}</strong>
          </span>
          <span *ngIf="!item.EstadoAnteriorDescripcion">
            <strong>Creado</strong>
          </span>
          a <strong>{{ item.EstadoNuevoDescripcion }}</strong>
        </p>
        <p class="details">
          <!-- Muestra el usuario que hizo el cambio -->
          <span class="user">Por: {{ item.Usuario || 'Sistema' }}</span>
          <!-- Muestra la fecha y hora del cambio -->
          <span class="date">{{ item.FechaCambio | date:'dd/MM/yyyy h:mm a' }}</span>
        </p>
      </div>
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button mat-dialog-close>Cerrar</button>
</mat-dialog-actions>
