<div class="contenedor-componente-ver-producto">
    <div class="header1">
        <h3 class="cabezera">      
            <span>Accesorio</span>
            <span>{{supplyId}}</span>
            
        </h3>
        <h3 class="cabezera1">
            <a mat-raised-button class="button-crear-prod" href="#" [routerLink]="['/home/listado-insumos']" color="primary" ><mat-icon class="iconos-custom">close</mat-icon></a>                 
        </h3>
    </div>

    <div class="container-ver">
        <div class="image-container">
          <img [src]="ImagePath" alt="Imagen del insumo" class="product-image" />
        </div>
      
        <form [formGroup]="insumoForm" (ngSubmit)="onSubmit()">
          <div class="form-fields">
      
            <!-- Fabricante -->
            <mat-form-field class="input-form-prod">
              <mat-label>Fabricante</mat-label>
              <mat-select formControlName ="FabricanteInsumos" name="FabricanteInsumos">             
                  <mat-option *ngFor="let est of selectedFabricanteInsumos" [value]="est.IdFabricanteInsumosPK" [disabled]="est.NombreFabricanteInsumos">{{est.NombreFabricanteInsumos}} </mat-option>
              </mat-select> 
          </mat-form-field>
      
            <!-- CATEGORIA -->
            <mat-form-field class="input-form-prod">
              <mat-label>Categoria</mat-label>
              <mat-select formControlName ="CategoriaInsumos" name="CategoriaInsumos">             
                  <mat-option *ngFor="let est of selectedCategoriaInsumos" [value]="est.IdCategoriaInsumosPK" [disabled]="est.NombreCategoriaInsumos">{{est.NombreCategoriaInsumos}} </mat-option>            
              </mat-select> 
          </mat-form-field> 

          <!-- SUBCATEGORIA -->
          <mat-form-field class="input-form-prod">
              <mat-label>Modelo</mat-label>
              <mat-select formControlName ="SubcategoriaInsumos" name="SubcategoriaInsumos">             
                  <mat-option *ngFor="let est of selectedSubcategoriaInsumos" [value]="est.IdSubcategoriaInsumos" [disabled]="est.NombreSubcategoriaInsumos">{{est.NombreSubcategoriaInsumos}} </mat-option>            
              </mat-select> 
            </mat-form-field>   
      
            <!-- Número de Serie -->
            <mat-form-field appearance="fill" class="full-width">
              <mat-label>Número de Serie</mat-label>
              <input matInput formControlName="NumeroSerie" maxlength="100" />
              <mat-error *ngIf="insumoForm.get('NumeroSerie')?.hasError('maxlength')">
                El número de serie no puede exceder los 100 caracteres.
              </mat-error>
            </mat-form-field>
      
            <!-- Estado -->
            <mat-form-field class="input-form-prod" *ngIf="insumo">
              <mat-label>Estado</mat-label>
              <mat-select formControlName = "EstadoInsumo" name="est">             
                  <mat-option *ngFor="let est of selectedEstado" placeholder="insumo.CodigoEstado"  [value]="est.CodigoEstado" [disabled]="est.DescripcionEstado">{{est.DescripcionEstado}} </mat-option>
              </mat-select> 
            </mat-form-field>
      
            <!-- Precio -->
            <mat-form-field appearance="fill" class="full-width">
              <mat-label>Precio Base</mat-label>
              <input matInput formControlName="PrecioBase" type="text" inputmode="decimal" placeholder="Ej: 150.50" />
              <mat-error *ngIf="insumoForm.get('PrecioBase')?.hasError('required')">
                El precio es obligatorio.
              </mat-error>
              <mat-error *ngIf="insumoForm.get('PrecioBase')?.hasError('pattern') || insumoForm.get('PrecioBase')?.hasError('max')">
                Precio inválido. Use hasta 4 dígitos y 2 decimales (ej: 1250.99).
              </mat-error>
            </mat-form-field>
      
            <!-- Cantidad -->
            <mat-form-field appearance="fill" class="full-width">
              <mat-label>Cantidad</mat-label>
              <input matInput formControlName="Cantidad" type="number" step="1" min="0" />
              <mat-error *ngIf="insumoForm.get('Cantidad')?.hasError('required')">
                La cantidad es obligatoria.
              </mat-error>
              <mat-error *ngIf="insumoForm.get('Cantidad')?.hasError('pattern') || insumoForm.get('Cantidad')?.hasError('min')">
                La cantidad debe ser un número entero positivo.
              </mat-error>
            </mat-form-field>
      
            <!-- Stock Mínimo -->
            <mat-form-field appearance="fill" class="full-width">
              <mat-label>Stock Mínimo</mat-label>
              <input matInput formControlName="StockMinimo" type="number" step="1" min="0" />
              <mat-error *ngIf="insumoForm.get('StockMinimo')?.hasError('required')">
                El stock mínimo es obligatorio.
              </mat-error>
              <mat-error *ngIf="insumoForm.get('StockMinimo')?.hasError('pattern') || insumoForm.get('StockMinimo')?.hasError('min')">
                El stock debe ser un número entero positivo.
              </mat-error>
            </mat-form-field>
      
            <!-- Comentario -->
            <mat-form-field appearance="fill" class="full-width">
              <mat-label>Comentario</mat-label>
              <textarea matInput formControlName="Comentario" rows="3" maxlength="10000"></textarea>
              <mat-error *ngIf="insumoForm.get('Comentario')?.hasError('maxlength')">
                El comentario no puede exceder los 10,000 caracteres.
              </mat-error>
            </mat-form-field>
      
          </div>
      
          <div class="buttons-container">
            <button mat-flat-button color="primary" type="submit" [disabled]="!insumoForm.valid || !insumoForm.dirty">Actualizar</button>
            <!-- <button mat-flat-button color="warn" type="button" >Eliminar</button> -->
            <button mat-flat-button color="warn" type="button" (click)="openDialogEliminar(supplyId)">Eliminar</button>
          </div>
        </form>
      </div>
      
</div>