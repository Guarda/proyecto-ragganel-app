:host {
  --primary-color: #3f51b5;
  --accent-color: #ff4081;
  --success-color: #28a745;
  --warning-color: #ffc107;
  --danger-color: #dc3545;
  --text-color: #333;
  --text-muted: #666;
  --bg-light: #f9f9f9;
  --border-color: #eee;
  --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.container {
  padding: 24px;
}

.dashboard-header {
  margin-bottom: 24px;
}
.dashboard-header h1 {
  font-size: 2em;
  font-weight: 500;
  color: var(--text-color);
  margin: 0;
}
.dashboard-header p {
  font-size: 1em;
  color: var(--text-muted);
}

.spinner-container, .error-container {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  min-height: 400px;
  gap: 20px;
  color: var(--text-muted);
}

.dashboard-grid {
display: grid;
gap: 24px;
grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Default para móviles */
}

/* Para pantallas más grandes (tablets y desktops) */
@media (min-width: 768px) {
.dashboard-grid {
grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
}
}

/* Estilo Mejorado para Tarjetas KPI */
.kpi-card {
  padding: 20px;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.kpi-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
}
.kpi-content {
  display: flex;
  align-items: center;
  gap: 20px;
}
.kpi-icon-wrapper {
  flex-shrink: 0;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}
.kpi-icon-wrapper mat-icon {
  color: #fff;
  font-size: 32px;
  height: 32px;
  width: 32px;
}
.kpi-text {
  display: flex;
  flex-direction: column;
}
.kpi-value {
  font-size: 2em;
  font-weight: 600;
  color: var(--text-color);
  line-height: 1.2;
}
.kpi-label {
  font-size: 1em;
  color: var(--text-muted);
}

/* Colores de Iconos KPI */
.icon-ventas { background-color: var(--primary-color); }
.icon-semana { background-color: var(--success-color); }
.icon-mes { background-color: var(--warning-color); }
.icon-taller { background-color: var(--danger-color); }
.icon-garantia { background-color: #17a2b8; } /* Color 'Info' (tomado del colorScheme del .ts) */

/* Estilos para otras tarjetas */
.chart-card, .list-card {
  padding: 24px;
}
.large-card {
  grid-column: 1 / -1; /* Ocupa todo el ancho por defecto */
}
@media (min-width: 960px) {
  .large-card {
    grid-column: span 2; /* Ocupa 2 columnas en pantallas medianas */
  }
}
@media (min-width: 1280px) {
  .large-card {
    grid-column: span 3; /* Ocupa 3 columnas en pantallas grandes */
  }
}

.mat-card-title {
  font-size: 1.2em;
  font-weight: 500;
  margin-bottom: 16px;
}
.dashboard-list {
  list-style: none;
  padding: 0;
  margin: 0;
}
.dashboard-list li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid var(--border-color);
}
.dashboard-list li:last-child {
  border-bottom: none;
}
.dashboard-list span, .dashboard-list small {
  color: var(--text-muted);
}
.dashboard-list strong {
  font-weight: 600;
  color: var(--primary-color);
}
.stock-alerta {
  color: var(--danger-color) !important;
}
.venta-info {
  display: flex;
  flex-direction: column;
}
.venta-info small {
  font-size: 0.8em;
}

.abc-chart-card {
/* Por defecto ocupa 1 columna */
}

@media (min-width: 768px) {
.abc-chart-card {
grid-column: span 2; /* Ocupa 2 columnas en tablets */
}
}

/* ... al final de dashboard.component.css ... */

.venta-info {
  display: flex;
  flex-direction: column;
  flex-grow: 1; /* Permite que ocupe el espacio disponible */
}

.articulos-vendidos {
  font-size: 0.85em;          /* Letra un poco más pequeña */
  color: #555;                 /* Un color de texto más suave */
  margin-top: 8px;              /* Espacio para separarlo del nombre del cliente */
  padding: 8px;                 /* Relleno interno */
  background-color: #f7f7f7;    /* Un fondo sutil para destacarlo */
  border-radius: 4px;           /* Bordes redondeados */
  white-space: pre-line;        /* ¡La línea clave! Renderiza los saltos de línea (\n) */
}

/* Clase para que las tarjetas KPI parezcan clickables */
.clickable-kpi {
  cursor: pointer;
}

/* Opcional: realzar un poco más el efecto hover que ya tienes */
.clickable-kpi:hover {
  /* Podrías añadir un borde sutil para destacar la selección */
  border: 1px solid var(--primary-color);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15); /* Sombra más pronunciada */
}

/* Estilos para la cabecera del gráfico con botones */
.chart-header-grid {
  display: grid;
  grid-template-columns: 1fr auto auto; /* Título | Grupo 1 | Grupo 2 */
  gap: 16px;
  align-items: center;
  margin-bottom: 20px;
}

/* Estilos para los toggles (puedes ajustar los anchos) */
.chart-toggle-tipo {
  justify-self: end;
}
.chart-toggle-fecha {
  justify-self: end;
}

/* Hacemos que los íconos en los botones toggle se vean bien */
.chart-toggle-tipo mat-button-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
}


/* Contenedor para el spinner de carga del gráfico */
.chart-spinner-container {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  min-height: 300px; /* Asegura que el spinner se vea centrado */
  color: var(--text-muted);
  gap: 16px;
}

/* Ajuste para el contenido del gráfico */
.chart-card mat-card-content {
  /* Asegura que el contenedor del gráfico tenga una altura */
  min-height: 350px; 
}

/* Opcional: Ajustar el tamaño de los botones en pantallas pequeñas */
@media (max-width: 900px) {
  .chart-header-grid {
    grid-template-columns: 1fr; /* Todo en una columna */
  }
  .chart-toggle-tipo, .chart-toggle-fecha {
    justify-self: stretch; /* Ocupan todo el ancho */
  }
  .chart-header-grid mat-button-toggle-group {
    width: 100%;
    display: flex;
  }
  .chart-header-grid mat-button-toggle-group mat-button-toggle {
    flex-grow: 1; /* Hace que los botones se estiren */
  }
}


/* Hace que todo el contenedor del gráfico sea clickable */
.clickable-chart {
  cursor: pointer;
  transition: background-color 0.2s ease;
}

/* Efecto visual sutil al pasar el mouse */
.clickable-chart:hover {
  background-color: #fcfcfc;
}

/* ⭐️ NUEVA REGLA
  Contenedor para alinear el título de la tarjeta
  y los botones de acción (como el de descargar Excel) 
*/
.card-title-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  /* Reemplaza el margen que tenía el mat-card-title */
  margin-bottom: 16px; 
}

/* Anula el margen inferior del título cuando está dentro del contenedor */
.card-title-container mat-card-title {
  margin-bottom: 0;
}
/* Se eliminan las reglas ::ng-deep que ya no son necesarias */
/* :host ::ng-deep ngx-charts-bar-vertical .bar { ... } */
/* :host ::ng-deep ngx-charts-bar-vertical .bar:hover { ... } */

/* 1. Contenedor del gráfico ABC para posicionamiento */
.abc-chart-container {
  position: relative;
  /* Damos altura mínima para que el gráfico y la leyenda "below" quepan */
  min-height: 450px;    /* <-- VALOR REDUCIDO */
  padding: 20px;        /* Evita que el gráfico se aplaste */

}

/* 2. Estilos para la etiqueta total superpuesta */
.chart-total-label {
  /* Posicionamiento absoluto en el centro */
  position: absolute;
  top: 50%;
  left: 40%; /* <-- AJUSTADO (para leyenda a la derecha) */
  transform: translate(-50%, -50%);
  
  /* Centrar el texto interno */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;

  /* Evitar que bloquee clics en el gráfico */
  pointer-events: none;
}

.total-label-text {
  font-size: 1.1em;
  font-weight: 500;
  color: var(--text-muted);
}

.total-label-value {
  font-size: 2.2em;
  font-weight: 600;
  color: var(--text-color);
  line-height: 1.2;
}

.abc-chart-container ngx-charts-pie-chart,
.abc-chart-container ngx-charts-bar-vertical {
  width: 100% !important;
  height: 400px !important; /* <-- VALOR REDUCIDO */
  display: block;
}

/* ==========================================================================
   BLOQUE ::NG-DEEP ELIMINADO
   Se eliminaron las reglas que forzaban la leyenda abajo.
   Ahora se respetará el [legendPosition]="'right'" del HTML.
   ========================================================================== */

/* ⭐️ AÑADE ESTO AL FINAL ⭐️ */
.clickable-list-item {
  cursor: pointer;
  transition: background-color 0.2s ease;
  /* Añadimos un padding ligero para que el hover se vea mejor */
  margin: 0 -8px;
  padding: 12px 8px;
}

.clickable-list-item:hover {
  background-color: var(--bg-light); /* Usa tu variable de fondo claro */
}

/* ==========================================================================
   ⭐️ ESTILOS MEJORADOS PARA EL MINI-DASHBOARD DE PEDIDOS ⭐️
   ========================================================================== */

/* Tarjeta con scroll */
.pedidos-list-card mat-card-content {
  max-height: 400px; /* Altura máxima antes de que aparezca el scroll */
  overflow-y: auto;  /* Scroll vertical automático */
  /* ⭐️ CAMBIO: Aumentamos el padding lateral de 16px a 24px */
  padding: 8px 24px; 
}

/* ⭐️ AÑADE ESTA NUEVA REGLA ⭐️ */
/* Anula el padding/margin genérico de .clickable-list-item 
  SOLO dentro de esta tarjeta.
*/
.pedidos-list-card .clickable-list-item {
  margin: 0 -24px; 
  padding: 12px 24px;
}
/* Contenedor para la info izquierda (código y badge) */
.pedido-info {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 8px; /* Aumenta el espacio */
}

/* Contenedor para la info derecha (total y fecha/alerta) */
.pedido-status {
  display: flex;
  flex-direction: column; /* Apilado vertical */
  align-items: flex-end; /* Alineado a la derecha */
  gap: 8px;
}

/* ---------------------------------- */
/* ⭐️ NUEVO: Badges de Estado ⭐️ */
/* ---------------------------------- */
.status-badge {
  padding: 4px 10px;
  border-radius: 12px; /* Más redondeado */
  font-weight: 600; /* Más legible */
  font-size: 0.75em; /* Pequeño y discreto */
  text-transform: uppercase;
  color: #ffffff!important; /* Fuerza el color del texto a blanco */
}

/* Colores basados en los IDs de tu tabla EstadoPedido */
.status-badge.status-1 { background-color: #50c945; } /* En espera (Gris) */
.status-badge.status-2 { background-color: #94a1eb } /* En tránsito (Azul) */
.status-badge.status-3 { background-color: #fd7e14; } /* Recibido en USA (Naranja) */
.status-badge.status-4 { background-color: #17a2b8; } /* En aduana/agencia (Cian) */
/* Los estados 5, 6, 7 (Recibido, Cancelado) no deberían ap arecer, pero es bueno tenerlos */
.status-badge.status-5 { background-color: var(--success-color); } /* Recibido (Verde) */
.status-badge.status-6 { background-color: var(--danger-color); } /* Cancelado (Rojo) */


/* ------------------------------------ */
/* ⭐️ NUEVO: Info de Fecha Estimada ⭐️ */
/* ------------------------------------ */
.fecha-estimada {
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.9em;
}
.fecha-estimada mat-icon {
  font-size: 16px;
  height: 16px;
  width: 16px;
}

/* ---------------------------------- */
/* ⭐️ MEJORA: Estilos de Alerta ⭐️ */
/* ---------------------------------- */
.alerta-text {
  color: var(--danger-color);
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.9em;
}
.alerta-text mat-icon {
  font-size: 16px;
  height: 16px;
  width: 16px;
}

/* ⭐️ MEJORA: Fila completa de la alerta */
.pedido-alerta {
  /* Fondo rojo muy sutil para que toda la fila destaque */
  background-color: rgba(220, 53, 69, 0.05); /* 5% de opacidad de --danger-color */
  border-left: 4px solid var(--danger-color);
  /* ⭐️ CAMBIO: Ajustamos el margen al nuevo padding de 24px */
  margin: 4px -24px; 
  /* ⭐️ CAMBIO: 
     Padding derecho 24px. 
     Padding izq 20px + 4px de borde = 24px.
     Esto mantiene todo simétrico.
  */
  padding: 12px 24px 12px 20px; 
}

/* Alerta al pasar el mouse */
.pedido-alerta:hover {
  background-color: rgba(220, 53, 69, 0.1) !important; /* 10% de opacidad */
}